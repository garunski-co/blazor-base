@using Microsoft.AspNetCore.Mvc.ViewFeatures
@using Microsoft.AspNetCore.Http
@inject IFileVersionProvider FileVersionProvider
@inject IHttpContextAccessor HttpContextAccessor;

@code {
    [Parameter] public bool AppendVersion { get; set; } = true;
    [Parameter] public required string Src { get; set; } = "";
    [Parameter(CaptureUnmatchedValues = true)] public Dictionary<string, object> AdditionalAttributes { get; set; } = default!;

    private string src = "";

    protected override void OnInitialized()
    {
        src = AppendVersion ? FileVersionProvider.AddFileVersionToPath(HttpContextAccessor.HttpContext!.Request.PathBase, Src) : Src;
    }
}

<script src="@src" @attributes="AdditionalAttributes"></script>